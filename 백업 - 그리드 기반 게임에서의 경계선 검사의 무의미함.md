# 그리드 기반 게임에서의 경계선 검사의 무의미함
* 2003-03-19. magicpotato.

> 요즘 그리드 기반의 게임은 별로 없지만, 길찾기 알고리즘에 적용 가능한 유용한 기법이다.


# 가정 
어떤 온라인 게임에 256x256의 맵이 있고 맵에서 활동하는
플레이어의 동기시야가 15라고 가정하고 설명하겠다.


# 문제 설명
플레이어가 움직이거나, 맵간 전환, 게임입장을 할때에는 시야검사를 해야한다.
이 검사를 할때 플레이어를 중심으로한 30x30의 영역을 검사하게 된다.
이 과정에서 플레이어가 맵의 구석(x:10, y:2과 같은)에 있을 경우
if 검사하지 않으면 잘못된 포인터를 참조해서 메모리 오류가 난다.


# 문제 결론
크게 중요하지 않은 부분 같지만, 실제로 이 부분을 코딩해 보면
상당히 복잡하고, 코딩 시간 낭비가 많은것을 알게된다.


# 해결
서버 맵의 크기를 (256+15) x (256+15) 로 변경시키고,
'시야'만큼의 테두리를 못가는 부분으로 만들어 버린다.
C/S간에 좌표를 전송할때는 15만큼 빼서 전송하면 비트를 아낄수 있다.

어차피 못 가는 부분이라면 경계선에 걸칠 염려가 없기때문에
경계선 검사 루틴 자체가 필요가 없어져서 서버가 빨라진다.


# 효과
보통 플레이어 1000명-2000명 + 에너미 300-800마리를 동시에 이동시킬때
저런 부분이 없어진다는것은 다른부분에서 좀더 세밀한 처리를 할수 있게 해준다.

EOF
